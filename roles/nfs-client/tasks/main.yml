---
    - name: Update yum
      yum:
        update_cache: yes
    - name: Install NFS client package
      yum:
        name: nfs-utils
        state: present
    - name: Create mount point
      file:
        path: "{{ nfs_mount_point }}"
        state: directory
        owner: "{{ nfs_user }}"
        group: "{{ nfs_group }}"
        mode: 0775
    - name: allow firewall
      shell: firewall-cmd --zone=public --add-port=2049/tcp --permanent
    - name: Mount NFS share
      mount:
        path: "{{ nfs_mount_point }}"
        src: "{{ nfs_server_ip }}:{{ nfs_shared_dir }}"
        fstype: nfs
        state: mounted
        opts: rw,sync,hard,intr
    - name: delete past gogs
      file:
        path: /home/user/gogs
        state: absent
    - name: install gogs
      copy:
        src: /home/user/gogs
        dest: /home/user/gogs
    - name: create directory custom
      file:
        path: /home/user/custom
        state: directory
    - name: create directory conf
      file:
        path: /home/user/custom/conf
        state: directory
    - name: install gogs conf
      template: 
        src: app.ini.j2
        dest: /home/user/custom/conf/app.ini
      vars:
        mariadb_ip: 10.26.0.57
